---
title: "Data preparation for modelling"
order: 1
---

## Data structure

The project aims to allow us to predict the value of a performance metric in future years (1, 2, 5 years, say) for each of the ICSs. Performance metrics could be impacted by demand and capacity metrics for the same years, or potentially years building up to that year.

To enable testing different models, the data structure should consider the following for each ICS and each year:

* a value for each target variable (performance metrics) - required
* a value for each predictor variable (demand and capacity metrics) - optional
* a lagged value (1 to x years lag) for target and predictor variable - optional
* inclusion of ICB code and year in for prediction variables?

## Splitting dataset

Data need to be split before training model. Some considerations are:

* Should the data be ordered prior to splitting (eg, should models be trained on earlier years, and tested on later years) - on occasion there won't be very long time series
  + try mixing the data up before splitting
* Train, validation and test set? Is there enough data to do this?

## Missing data

* How to accommodate independent providers in the metrics
* The input data has missing values. The data needs more investigation as to why it is missing (it could be really missing, eg, data not submitted, or it could be a zero, eg, a zero numerator for that metric). 

  - Some timeseries data for Trusts (eg beds available) stop being reported and it is difficult to understand why (eg RT5 stops being reported in Q1 2015 even though the trust still exists)
  - Some "Independent Sector Healthcare providers" stop reporting Sickness data mid-timeseries

* Need to investigate different imputation methods for different features

## Modelling

* Try out different ML methods?
* Should demand and capacity variables be modelled separately (like [Charlotte's ED modelling](https://charlottejames.github.io/ed-forecast/index.html))

## Other questions

* What to do with IMD? It is published by LSOA for a single year. Should the information for each ICS be applied for each year? Should it relate to the population variables? How else to integrate deprivation into the analysis?

## Next steps

* try running other performance metrics through the modelling process to see if others come out better
* improve hyperparameter tuning for RF
* check whether missing data are missing or zero (values could be zero but come through as missing because the numerator is zero)
* Stepwise modelling for linear/logistic (step aic - more popular at the moment; step bic)
* How to keep the predictions between 0 and 1? Does it mean the model should be a logistic regression?
* collect more data
* feature engineering
  + combine total beds with population (or population in need, eg, population over 65)
* demonstrate proof of concept to stakeholders
  + identify other metrics that would be useful to predict
* demonstrate scenario modelling

### Notes

Parametric modelling should have more thought on the input features, whereas ML potentially can throw them all in and see what happens