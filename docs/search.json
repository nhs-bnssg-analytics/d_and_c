[
  {
    "objectID": "outputs/Modelling/random_forest.html",
    "href": "outputs/Modelling/random_forest.html",
    "title": "Random Forest",
    "section": "",
    "text": "Load in the libraries and useful functions.\n\nsource(here::here(\"R/00_libraries.R\"))\nsource(here::here(\"R/01_utils.R\"))\n\nLoad in the pre-prepared data.\n\nsource(here::here(\"R/03_collating_data.R\"))"
  },
  {
    "objectID": "outputs/Modelling/random_forest.html#setup",
    "href": "outputs/Modelling/random_forest.html#setup",
    "title": "Random Forest",
    "section": "",
    "text": "Load in the libraries and useful functions.\n\nsource(here::here(\"R/00_libraries.R\"))\nsource(here::here(\"R/01_utils.R\"))\n\nLoad in the pre-prepared data.\n\nsource(here::here(\"R/03_collating_data.R\"))"
  },
  {
    "objectID": "outputs/Modelling/random_forest.html#preprocessing",
    "href": "outputs/Modelling/random_forest.html#preprocessing",
    "title": "Random Forest",
    "section": "Preprocessing",
    "text": "Preprocessing\nCreate dataframe with target and predictor variables.\n\ntarget_variable &lt;- \"Proportion of completed pathways greater than 18 weeks from referral (admitted)\"\n\ndc_data &lt;- dc_data |&gt; \n  select(\n    all_of(c(\"org\", \"year\", target_variable)),\n    matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\n  ) |&gt; \n  dplyr::filter(\n    # retain all rows where target variable is not na\n    # retain all rows where we have population age group information\n    if_all(\n      all_of(\n        c(target_variable, \"Proportion of population in age band (80-89)\")), ~ !is.na(.))\n  )\n\n# rows that contain nas\nrowSums(is.na(dc_data))\n\n  [1] 2 2 2 1 1 2 1 1 1 2 2 1 1 1 1 2 2 2 1 1 1 1 1 2 1 1 0 0 1 1 1 2 2 2 1 2 1\n [38] 4 1 2 2 1 2 2 2 1 1 2 1 1 1 2 2 1 1 2 1 2 2 3 1 1 1 1 1 2 1 1 0 0 1 1 1 2\n [75] 2 2 1 3 1 4 1 2 2 1 1 2 2 1 1 2 1 1 1 2 4 1 1 2 1 2 2 3 1 1 1 1 1 2 1 1 0\n[112] 0 2 1 1 2 2 2 1 3 1 3 1 2 3 1 1 2 2 1 1 2 1 1 2 2 4 1 1 2 1 2 2 3 1 1 1 1\n[149] 1 2 0 1 0 0 2 1 1 2 2 2 1 2 0 3 1 2 3 1 1 2 2 1 1 2 1 1 2 3 4 1 1 2 1 2 2\n[186] 3 1 1 1 1 1 2 0 1 0 0 2 1 1 1 2 2 1 2 0 3 1 2 3 1 1 2 2 1 1 2 1 1 2 3 4 1\n[223] 1 2 2 2 3 1 1 1 1 1 2 0 1 0 1 2 2 1 1 2 0 2 1 3 1 2 3 0 2 1 1 3 3 1 1 2 1\n[260] 1 2 3 4 1 2 2 2 3 1 1 1 1 1 2 1 1 0 1 2 2 1 1 2 0 2 1 3 1 2 3 1 2 1 1 3 4\n[297] 4 2 3 2 2 2 5 2 3 3 3 2 2 2 2 3 2 2 2 3 1 3 4 3 3 4 2 3 2 2 4 2 3 3 1 4 3\n[334] 2 2 2\n\n# columns that contain nas\ncolSums(is.na(dc_data)) |&gt; \n  tibble::enframe()\n\n# A tibble: 52 × 2\n   name                                                                    value\n   &lt;chr&gt;                                                                   &lt;dbl&gt;\n 1 org                                                                         0\n 2 year                                                                        0\n 3 Proportion of completed pathways greater than 18 weeks from referral (…     0\n 4 Bed availability - day - General & Acute                                    0\n 5 Workforce FTEs per 10,000 population (Ambulance staff)                      0\n 6 Workforce FTEs per 10,000 population (Associate Specialist)                 0\n 7 Workforce FTEs per 10,000 population (Central functions)                    0\n 8 Workforce FTEs per 10,000 population (Consultant)                           0\n 9 Workforce FTEs per 10,000 population (Core Training)                        0\n10 Workforce FTEs per 10,000 population (Foundation Doctor Year 1)             0\n# ℹ 42 more rows\n\n\nAdd lag variables.\n\ndc_data &lt;- dc_data |&gt; \n  mutate(\n    across(\n      matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\"),\n      .names = \"lag1_{.col}\",\n      .fns = lag\n    ),\n    .by = org\n  ) |&gt; \n  arrange(year, org)"
  },
  {
    "objectID": "outputs/Modelling/random_forest.html#tidymodels",
    "href": "outputs/Modelling/random_forest.html#tidymodels",
    "title": "Random Forest",
    "section": "{tidymodels}",
    "text": "{tidymodels}\n\nSplit the data\nSelect the modelling method (random forest from the ranger package)\nImpute missing data (median)\n\n\nset.seed(321)\n\n# split dataset into train, validation and test\nsplits &lt;- rsample::initial_validation_time_split(\n  data = dc_data#,\n  # lag = 1\n)\n\ndata_train &lt;- rsample::training(splits)\ndata_validation &lt;- rsample::validation(splits)\ndata_test &lt;- rsample::testing(splits)\ndata_train_validation &lt;- bind_rows(\n  data_train,\n  data_validation\n)\n\n# check when train, validation and test data start and finish\nlapply(\n  list(data_train, data_validation, data_test),\n  function(x) range(x$year)\n)\n\n[[1]]\n[1] 2013 2017\n\n[[2]]\n[1] 2017 2019\n\n[[3]]\n[1] 2019 2020\n\ndata_validation_set &lt;- validation_set(splits)\n\n# how many cores on the machine so we can parallelise\ncores &lt;- parallel::detectCores()\n\n# set model\nrf_mod &lt;- \n  rand_forest(\n    mtry = tune(), \n    min_n = tune(), \n    trees = 1000\n  ) %&gt;% \n  set_engine(\"ranger\", num.threads = cores) %&gt;% \n  set_mode(\"regression\")\n\n# create recipes\n# interaction variables (year and variables?)\n\n# impute missings?\n# variables with missing data\nmissing_data &lt;- names(dc_data)[colSums(is.na(dc_data)) &gt; 0]\n\nrf_recipe &lt;- recipe(data_train) |&gt; \n  update_role(\n    all_of(target_variable),\n    new_role = \"outcome\"\n  ) |&gt; \n  update_role(\n    org, year,\n    new_role = \"id variable\"\n  ) |&gt; \n  update_role(\n    matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\"),\n    new_role = \"predictor\"\n  ) |&gt; \n  step_impute_median(all_of(missing_data))# %&gt;%\n  # step_lag(matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\"),\n  #          lag = 1:2)\n\nSet up {tidymodels} workflow:\n\nAdd model to workflow\nAdd recipe to workflow\n\n\n# add recipe to workflow\nrf_workflow &lt;- \n  workflow() |&gt; \n  add_model(rf_mod) %&gt;% \n  add_recipe(rf_recipe)\n\nTune the hyperparameters.\n\n# design the tuning of the hyperparameters\nrf_res &lt;- \n  rf_workflow %&gt;% \n  tune_grid(data_validation_set,\n            grid = 50,\n            control = control_grid(save_pred = TRUE))\n\ni Creating pre-processing data to finalize unknown parameter: mtry\n\n\nWarning in `[.tbl_df`(x, is.finite(x &lt;- as.numeric(x))): NAs introduced by\ncoercion\n\n# show the best parameters\nrf_res %&gt;% \n  show_best(metric = \"rmse\")\n\n# A tibble: 5 × 8\n   mtry min_n .metric .estimator   mean     n std_err .config              \n  &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;                \n1    47     2 rmse    standard   0.0577     1      NA Preprocessor1_Model07\n2    26     4 rmse    standard   0.0581     1      NA Preprocessor1_Model19\n3    55     3 rmse    standard   0.0584     1      NA Preprocessor1_Model25\n4    42     6 rmse    standard   0.0588     1      NA Preprocessor1_Model23\n5    56     7 rmse    standard   0.0594     1      NA Preprocessor1_Model34\n\nautoplot(rf_res)\n\n\n\n\n\n# select the best parameters\nrf_best &lt;- \n  rf_res %&gt;% \n  select_best(metric = \"rmse\")\n\n\n# the last model\nlast_rf_mod &lt;- \n  rand_forest(mtry = rf_best$mtry, min_n = rf_best$min_n, trees = 1000) %&gt;% \n  set_engine(\"ranger\", num.threads = cores, importance = \"impurity\") %&gt;% \n  set_mode(\"regression\")\n\n# the last workflow\nlast_rf_workflow &lt;- \n  rf_workflow %&gt;% \n  update_model(last_rf_mod)\n\n# the last fit\nset.seed(345)\nlast_rf_fit &lt;- \n  last_rf_workflow %&gt;% \n  last_fit(splits)\n\nlast_rf_fit %&gt;% \n  collect_metrics()\n\n# A tibble: 2 × 4\n  .metric .estimator .estimate .config             \n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               \n1 rmse    standard       0.121 Preprocessor1_Model1\n2 rsq     standard       0.101 Preprocessor1_Model1"
  },
  {
    "objectID": "outputs/Modelling/random_forest.html#variable-importance",
    "href": "outputs/Modelling/random_forest.html#variable-importance",
    "title": "Random Forest",
    "section": "Variable importance",
    "text": "Variable importance\n\nlast_rf_fit %&gt;% \n  extract_fit_parsnip() %&gt;% \n  vip::vip(num_features = 20)"
  },
  {
    "objectID": "outputs/Data/data_exploratory_data_analysis.html",
    "href": "outputs/Data/data_exploratory_data_analysis.html",
    "title": "Exploratory data analysis",
    "section": "",
    "text": "These plots highlight which of the variables are correlated.\n\nCapacityDemandPerformance\n\n\n\nThe following either provide too little data or are highly correlated with another metric, and have therefore been removed:\n\nESR absence (pct organisation type)\nBed availability - day - Learning Disabilities\nBed availability - day - Maternity\nBed availability - day - Mental Illness\nBed availability - day - Total\nBed availability - overnight - Total\nWorkforce FTEs per 10,000 population (Total)\n\n\n\n\nThe following either provide too little data or are highly correlated with another metric, and have therefore been removed:\n\nLast BP reading of patients (&lt;80 yrs, with hypertension), in the last 12 months is &lt;= 140/90 mmHg (denominator incl. PCAs)\nSmoking status of patients with certain conditions recorded in the last 12 months (denominator incl. PCAs)\nEstimated prevalence of common mental disorders: % of population aged 16 & over\nEstimated prevalence of common mental disorders: % of population aged 65 & over"
  },
  {
    "objectID": "outputs/Data/data_exploratory_data_analysis.html#correlation-plots",
    "href": "outputs/Data/data_exploratory_data_analysis.html#correlation-plots",
    "title": "Exploratory data analysis",
    "section": "",
    "text": "These plots highlight which of the variables are correlated.\n\nCapacityDemandPerformance\n\n\n\nThe following either provide too little data or are highly correlated with another metric, and have therefore been removed:\n\nESR absence (pct organisation type)\nBed availability - day - Learning Disabilities\nBed availability - day - Maternity\nBed availability - day - Mental Illness\nBed availability - day - Total\nBed availability - overnight - Total\nWorkforce FTEs per 10,000 population (Total)\n\n\n\n\nThe following either provide too little data or are highly correlated with another metric, and have therefore been removed:\n\nLast BP reading of patients (&lt;80 yrs, with hypertension), in the last 12 months is &lt;= 140/90 mmHg (denominator incl. PCAs)\nSmoking status of patients with certain conditions recorded in the last 12 months (denominator incl. PCAs)\nEstimated prevalence of common mental disorders: % of population aged 16 & over\nEstimated prevalence of common mental disorders: % of population aged 65 & over"
  },
  {
    "objectID": "outputs/Data/data_challenges.html",
    "href": "outputs/Data/data_challenges.html",
    "title": "Challenges",
    "section": "",
    "text": "There are limitations with the data processing related to:\n\n\nData are published at different geographies. While some geographies map coterminously with Integrated Care System geographies, some approximate methods of aggregation are needed for the ones that don’t.\n\n\n\nData are published at different time periods and frequencies. Data are generally published based on regulatory requirements. Metrics can change over time as well. Therefore, metrics may exist for a few years and then stop being published. Equally, metrics may only be introduced very recently.\n\n\n\nMetrics can be published by month, quarter, and year (both financial or calendar). The outputs of the project are intended to inform long term strategic planning, so the shorter frequency metrics are aggregated up to an annual time period to allow for annual predictions.\n\n\n\nData are generally published as raw figures. Without context, it is difficult to evaluate whether a figure is high or low. For added context, the metric needs to be calculated with some sort of denominator. This enables comparison with other areas. The choice of denominator determines the metric value and it can have a large influence on how the metric differs between areas. The description of the metric, along with the denominator and numerator description, can be found in the configuration-table.csv file.\n\n\n\nThere are challenges around interpretation of metrics. The value of a metric can be influenced by many factors. To ensure that the outputs are practical, these factors need to be considered at all stages to ensure the metrics are most useful to the end user.\n\n\n\nThe pandemic period will heavily influence a lot of metrics. Each metric may have been influenced in different ways and not represent business-as-usual, therefore relationships between metrics may drastically differ during that period from the non-pandemic period. This will impact any predictive model."
  },
  {
    "objectID": "outputs/Data/data_challenges.html#limitations",
    "href": "outputs/Data/data_challenges.html#limitations",
    "title": "Challenges",
    "section": "",
    "text": "There are limitations with the data processing related to:\n\n\nData are published at different geographies. While some geographies map coterminously with Integrated Care System geographies, some approximate methods of aggregation are needed for the ones that don’t.\n\n\n\nData are published at different time periods and frequencies. Data are generally published based on regulatory requirements. Metrics can change over time as well. Therefore, metrics may exist for a few years and then stop being published. Equally, metrics may only be introduced very recently.\n\n\n\nMetrics can be published by month, quarter, and year (both financial or calendar). The outputs of the project are intended to inform long term strategic planning, so the shorter frequency metrics are aggregated up to an annual time period to allow for annual predictions.\n\n\n\nData are generally published as raw figures. Without context, it is difficult to evaluate whether a figure is high or low. For added context, the metric needs to be calculated with some sort of denominator. This enables comparison with other areas. The choice of denominator determines the metric value and it can have a large influence on how the metric differs between areas. The description of the metric, along with the denominator and numerator description, can be found in the configuration-table.csv file.\n\n\n\nThere are challenges around interpretation of metrics. The value of a metric can be influenced by many factors. To ensure that the outputs are practical, these factors need to be considered at all stages to ensure the metrics are most useful to the end user.\n\n\n\nThe pandemic period will heavily influence a lot of metrics. Each metric may have been influenced in different ways and not represent business-as-usual, therefore relationships between metrics may drastically differ during that period from the non-pandemic period. This will impact any predictive model."
  },
  {
    "objectID": "outputs/01_index.html",
    "href": "outputs/01_index.html",
    "title": "Scope",
    "section": "",
    "text": "Understanding system demand and capacity is essential for operational and strategic healthcare planning. A common approach to demand and capacity planning is spreadsheet modelling and simulating patient flow through the health system. Within each Integrated Care System (ICS) these kinds of models are possible to make, and often already exist. It is much harder to do this at a regional level because the structures and populations in each ICS are very different to one another. A tool that is developed to try and capture the intricacies and detail in one ICS is therefore likely to be unrepresentative and open to challenge if used to inform local decision making in another. Additionally, each ICS has developed their own bespoke tools to understand demand and capacity, which already supports local decision making, particularly in the acute setting."
  },
  {
    "objectID": "outputs/01_index.html#background",
    "href": "outputs/01_index.html#background",
    "title": "Scope",
    "section": "",
    "text": "Understanding system demand and capacity is essential for operational and strategic healthcare planning. A common approach to demand and capacity planning is spreadsheet modelling and simulating patient flow through the health system. Within each Integrated Care System (ICS) these kinds of models are possible to make, and often already exist. It is much harder to do this at a regional level because the structures and populations in each ICS are very different to one another. A tool that is developed to try and capture the intricacies and detail in one ICS is therefore likely to be unrepresentative and open to challenge if used to inform local decision making in another. Additionally, each ICS has developed their own bespoke tools to understand demand and capacity, which already supports local decision making, particularly in the acute setting."
  },
  {
    "objectID": "outputs/01_index.html#project-scope",
    "href": "outputs/01_index.html#project-scope",
    "title": "Scope",
    "section": "Project scope",
    "text": "Project scope\nThis project aims to understand demand and capacity in a novel way. Using temporal data on demand (e.g., population in older age groups) and capacity (e.g., social care funding) for each ICS geography as model inputs, this project aims to predict performance metrics (e.g., No Criteria to Reside remaining in hospital) using modern spatio-temporal modelling techniques. The project uses publicly available data to generate predictions for each ICS. It also identifies which input metrics have the biggest influence on the performance metric being predicted."
  },
  {
    "objectID": "outputs/01_index.html#questions-this-work-can-support",
    "href": "outputs/01_index.html#questions-this-work-can-support",
    "title": "Scope",
    "section": "Questions this work can support",
    "text": "Questions this work can support\nConceptually, the performance metrics should be impacted by the demand and capacity handles. Some of the demand and capacity metrics are ones that can be influenced by policy and investment. This work should be able to identify significant associations between the demand and capacity metrics and the resulting performance. This will help support high-level prioritisation for investment and policy making. For example, if it can be shown there is a strong relationship between social care funding and reducing No Criteria to Reside patients, this can be used to make a strong case for increasing social care funding, if this will be more than offset by the acute cost saving."
  },
  {
    "objectID": "outputs/01_index.html#proposed-outputs",
    "href": "outputs/01_index.html#proposed-outputs",
    "title": "Scope",
    "section": "Proposed outputs",
    "text": "Proposed outputs\nThe outputs from this work would allow the ICSs to see the relationships between their demand and capacity metrics and performance. The baseline modelling will first produce a ‘do nothing’ performance trajectory, based on current/expected levels of demand and capacity. It will then allow users, through ‘what-if’ scenario analysis, to sensitivity test the models for future years to understand how changes to the input metrics will affect future predictions – thus allowing them to inform more optimal decisions on future spend and resource allocation."
  },
  {
    "objectID": "outputs/404.html",
    "href": "outputs/404.html",
    "title": "Page Not Found",
    "section": "",
    "text": "The page you requested cannot be found (perhaps it was moved or renamed).\nYou may want to try searching to find the page’s new location."
  },
  {
    "objectID": "outputs/Data/data_description.html",
    "href": "outputs/Data/data_description.html",
    "title": "Description",
    "section": "",
    "text": "An approximate model of how demand and capacity metrics can be seen below:\n\n\n\nApproximate schematic of relationships between demand and capacity and performance\n\n\n\n\nThe metrics collated for the project are described in the table below:\n\n\n\n\n\n\ndomain\nmetric\n\n\n\n\nCapacity\nBed availability - day - General & Acute\n\n\nCapacity\nBed availability - overnight - General & Acute\n\n\nCapacity\nBed availability - overnight - Learning Disabilities\n\n\nCapacity\nBed availability - overnight - Maternity\n\n\nCapacity\nBed availability - overnight - Mental Illness\n\n\nCapacity\nESR absence (acute organisation type)\n\n\nCapacity\nESR absence (ambulance organisation type)\n\n\nCapacity\nESR absence (community provider trust organisation type)\n\n\nCapacity\nESR absence (mental health organisation type)\n\n\nCapacity\nESR absence (others organisation type)\n\n\nCapacity\nGross Total Expenditure (£000s) per individual with long term support during the year\n\n\nCapacity\nNumber of clinical workforce (FTE) in general practice per 10,000 registered patients (PCN average applied to all practices in the PCN)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Ambulance staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Associate Specialist)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Central functions)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Consultant)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Core Training)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Foundation Doctor Year 1)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Foundation Doctor Year 2)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (HCHS Doctors)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Hospital Practitioner / Clinical Assistant)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Hotel, property & estates)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Managers)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Midwives)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (NHS infrastructure support)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Nurses & health visitors)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Other and Local HCHS Doctor Grades)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Other staff or those with unknown classification)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Professionally qualified clinical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Scientific, therapeutic & technical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Senior managers)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Specialty Doctor)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Specialty Registrar)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Staff Grade)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to ST&T staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to ambulance staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to clinical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to doctors, nurses & midwives)\n\n\nDemand\n% active smokers (GPPS)\n\n\nDemand\n% former smokers (GPPS)\n\n\nDemand\nAtrial fibrillation: QOF prevalence (all ages)\n\n\nDemand\nCVD-PP: QOF prevalence (30-74 yrs) - retired after 2019/20\n\n\nDemand\nDepression: QOF prevalence (18+ yrs)\n\n\nDemand\nHypertension: QOF prevalence (all ages)\n\n\nDemand\nLast BP reading of patients (80+ yrs, with hypertension), in the last 12 months is &lt;= 150/90 mmHg (denominator incl. PCAs)\n\n\nDemand\nLearning disability: QOF prevalence (all ages)\n\n\nDemand\nMental Health: QOF prevalence (all ages)\n\n\nDemand\nObesity: QOF prevalence (18+ yrs)\n\n\nDemand\nPatients (aged 45+ yrs), who have a record of blood pressure in the last 5 yrs (denominator incl. PCAs)\n\n\nDemand\nProportion of population in age band (0-9)\n\n\nDemand\nProportion of population in age band (10-19)\n\n\nDemand\nProportion of population in age band (20-29)\n\n\nDemand\nProportion of population in age band (30-39)\n\n\nDemand\nProportion of population in age band (40-49)\n\n\nDemand\nProportion of population in age band (50-59)\n\n\nDemand\nProportion of population in age band (60-69)\n\n\nDemand\nProportion of population in age band (70-79)\n\n\nDemand\nProportion of population in age band (80-89)\n\n\nDemand\nProportion of population in age band (90+)\n\n\nDemand\nProportion of resident population in national deprivation quintile (Average deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Least deprived quintile) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Most deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Second least deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Second most deprived ) - IMD 2019\n\n\nDemand\nReception prevalence of overweight (including obesity)\n\n\nDemand\nRecord of offer of support and treatment in the last 24 months for smokers aged 15+ yrs (denominator incl. PCAs)\n\n\nDemand\nSmoking Prevalence in adults (18+) - current smokers (APS)\n\n\nDemand\nSmoking cessation support and treatment offered to patients with certain conditions (denominator incl. PCAs)\n\n\nDemand\nSmoking status at time of delivery\n\n\nDemand\nSmoking: QOF prevalence (15+ yrs)\n\n\nDemand\nYear 6 prevalence of overweight (including obesity)\n\n\nDemand\nnew hypertension patients, aged 30-74, with a CV risk assessment &gt;= 20% treated with statins (denominator incl. PCAs) - retired after 2019/20\n\n\nPerformance\n62 Day Wait - Consultant Ref (proportion within standard)\n\n\nPerformance\n62 Day Wait - GP Referral (proportion within standard)\n\n\nPerformance\n62 Day Wait - Screening Ref (proportion within standard)\n\n\nPerformance\nAverage daily proportion of patients who no longer meet the criteria to reside that remain in hospital\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Total attendances)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 1 Departments - Major A&E)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 2 Departments - Single Specialty)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 3 Departments - Other A&E/Minor Injury Unit)\n\n\nPerformance\nProportion of attended appointments (0 to 1 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (1 to 2 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (2 to 3 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (3 to 4 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (Over 4 weeks wait time)\n\n\nPerformance\nProportion of completed pathways greater than 18 weeks from referral (admitted)\n\n\nPerformance\nProportion of completed pathways greater than 18 weeks from referral (not admitted)\n\n\n\n\n\n\n\nThe frequencies these metrics have been collected at are displayed below:\n\n\n\n\n\nFor the annual metric (financial and calendar year), these are the number of record we have for each year (this is related to the geography the metric is published at):\n\n\n\n\n\n\n\n\nThe following plots help to understand the data distribution over the years to sense check each year is consistent with previous years.\n\nCapacityDemandPerformance"
  },
  {
    "objectID": "outputs/Data/data_description.html#data-description",
    "href": "outputs/Data/data_description.html#data-description",
    "title": "Description",
    "section": "",
    "text": "An approximate model of how demand and capacity metrics can be seen below:\n\n\n\nApproximate schematic of relationships between demand and capacity and performance\n\n\n\n\nThe metrics collated for the project are described in the table below:\n\n\n\n\n\n\ndomain\nmetric\n\n\n\n\nCapacity\nBed availability - day - General & Acute\n\n\nCapacity\nBed availability - overnight - General & Acute\n\n\nCapacity\nBed availability - overnight - Learning Disabilities\n\n\nCapacity\nBed availability - overnight - Maternity\n\n\nCapacity\nBed availability - overnight - Mental Illness\n\n\nCapacity\nESR absence (acute organisation type)\n\n\nCapacity\nESR absence (ambulance organisation type)\n\n\nCapacity\nESR absence (community provider trust organisation type)\n\n\nCapacity\nESR absence (mental health organisation type)\n\n\nCapacity\nESR absence (others organisation type)\n\n\nCapacity\nGross Total Expenditure (£000s) per individual with long term support during the year\n\n\nCapacity\nNumber of clinical workforce (FTE) in general practice per 10,000 registered patients (PCN average applied to all practices in the PCN)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Ambulance staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Associate Specialist)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Central functions)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Consultant)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Core Training)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Foundation Doctor Year 1)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Foundation Doctor Year 2)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (HCHS Doctors)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Hospital Practitioner / Clinical Assistant)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Hotel, property & estates)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Managers)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Midwives)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (NHS infrastructure support)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Nurses & health visitors)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Other and Local HCHS Doctor Grades)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Other staff or those with unknown classification)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Professionally qualified clinical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Scientific, therapeutic & technical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Senior managers)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Specialty Doctor)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Specialty Registrar)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Staff Grade)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to ST&T staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to ambulance staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to clinical staff)\n\n\nCapacity\nWorkforce FTEs per 10,000 population (Support to doctors, nurses & midwives)\n\n\nDemand\n% active smokers (GPPS)\n\n\nDemand\n% former smokers (GPPS)\n\n\nDemand\nAtrial fibrillation: QOF prevalence (all ages)\n\n\nDemand\nCVD-PP: QOF prevalence (30-74 yrs) - retired after 2019/20\n\n\nDemand\nDepression: QOF prevalence (18+ yrs)\n\n\nDemand\nHypertension: QOF prevalence (all ages)\n\n\nDemand\nLast BP reading of patients (80+ yrs, with hypertension), in the last 12 months is &lt;= 150/90 mmHg (denominator incl. PCAs)\n\n\nDemand\nLearning disability: QOF prevalence (all ages)\n\n\nDemand\nMental Health: QOF prevalence (all ages)\n\n\nDemand\nObesity: QOF prevalence (18+ yrs)\n\n\nDemand\nPatients (aged 45+ yrs), who have a record of blood pressure in the last 5 yrs (denominator incl. PCAs)\n\n\nDemand\nProportion of population in age band (0-9)\n\n\nDemand\nProportion of population in age band (10-19)\n\n\nDemand\nProportion of population in age band (20-29)\n\n\nDemand\nProportion of population in age band (30-39)\n\n\nDemand\nProportion of population in age band (40-49)\n\n\nDemand\nProportion of population in age band (50-59)\n\n\nDemand\nProportion of population in age band (60-69)\n\n\nDemand\nProportion of population in age band (70-79)\n\n\nDemand\nProportion of population in age band (80-89)\n\n\nDemand\nProportion of population in age band (90+)\n\n\nDemand\nProportion of resident population in national deprivation quintile (Average deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Least deprived quintile) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Most deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Second least deprived) - IMD 2019\n\n\nDemand\nProportion of resident population in national deprivation quintile (Second most deprived ) - IMD 2019\n\n\nDemand\nReception prevalence of overweight (including obesity)\n\n\nDemand\nRecord of offer of support and treatment in the last 24 months for smokers aged 15+ yrs (denominator incl. PCAs)\n\n\nDemand\nSmoking Prevalence in adults (18+) - current smokers (APS)\n\n\nDemand\nSmoking cessation support and treatment offered to patients with certain conditions (denominator incl. PCAs)\n\n\nDemand\nSmoking status at time of delivery\n\n\nDemand\nSmoking: QOF prevalence (15+ yrs)\n\n\nDemand\nYear 6 prevalence of overweight (including obesity)\n\n\nDemand\nnew hypertension patients, aged 30-74, with a CV risk assessment &gt;= 20% treated with statins (denominator incl. PCAs) - retired after 2019/20\n\n\nPerformance\n62 Day Wait - Consultant Ref (proportion within standard)\n\n\nPerformance\n62 Day Wait - GP Referral (proportion within standard)\n\n\nPerformance\n62 Day Wait - Screening Ref (proportion within standard)\n\n\nPerformance\nAverage daily proportion of patients who no longer meet the criteria to reside that remain in hospital\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Total attendances)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 1 Departments - Major A&E)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 2 Departments - Single Specialty)\n\n\nPerformance\nProportion of A&E attendances greater than 4 hours (Type 3 Departments - Other A&E/Minor Injury Unit)\n\n\nPerformance\nProportion of attended appointments (0 to 1 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (1 to 2 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (2 to 3 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (3 to 4 weeks wait time)\n\n\nPerformance\nProportion of attended appointments (Over 4 weeks wait time)\n\n\nPerformance\nProportion of completed pathways greater than 18 weeks from referral (admitted)\n\n\nPerformance\nProportion of completed pathways greater than 18 weeks from referral (not admitted)\n\n\n\n\n\n\n\nThe frequencies these metrics have been collected at are displayed below:\n\n\n\n\n\nFor the annual metric (financial and calendar year), these are the number of record we have for each year (this is related to the geography the metric is published at):\n\n\n\n\n\n\n\n\nThe following plots help to understand the data distribution over the years to sense check each year is consistent with previous years.\n\nCapacityDemandPerformance"
  },
  {
    "objectID": "outputs/introduction_introduction_and_aims.html",
    "href": "outputs/introduction_introduction_and_aims.html",
    "title": "Introduction",
    "section": "",
    "text": "The aims of this project are to use publicly available data to find associations between performance within Integrated Care Systems, and different demand and capacity metrics.\nThe strong associations can then be explored as to whether there are actions that can be taken to improve performance.\n\n\nA summary of the aims of the project (which will need refining over time!):\n\nIdentify associations between metrics that affect performance\nEnable long term decision making\nForecast future performance based on different scenarios\nOpen source and reproducible code"
  },
  {
    "objectID": "outputs/introduction_introduction_and_aims.html#introduction-and-aims",
    "href": "outputs/introduction_introduction_and_aims.html#introduction-and-aims",
    "title": "Introduction",
    "section": "",
    "text": "The aims of this project are to use publicly available data to find associations between performance within Integrated Care Systems, and different demand and capacity metrics.\nThe strong associations can then be explored as to whether there are actions that can be taken to improve performance.\n\n\nA summary of the aims of the project (which will need refining over time!):\n\nIdentify associations between metrics that affect performance\nEnable long term decision making\nForecast future performance based on different scenarios\nOpen source and reproducible code"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html",
    "href": "outputs/Modelling/linear_regression.html",
    "title": "Linear regression",
    "section": "",
    "text": "source(here::here(\"R/00_libraries.R\"))\nsource(here::here(\"R/01_utils.R\"))\nsource(here::here(\"R/03_collating_data.R\"))\nsource(here::here(\"R/04_modelling_utils.R\"))"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html#select-fields",
    "href": "outputs/Modelling/linear_regression.html#select-fields",
    "title": "Linear regression",
    "section": "Select fields",
    "text": "Select fields\n\ntarget_variable &lt;- \"Proportion of completed pathways greater than 18 weeks from referral (admitted)\"\n\ndc_data &lt;- dc_data |&gt; \n  select(\n    all_of(c(\"org\", \"year\", target_variable)),\n    matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\n  ) |&gt; \n  dplyr::filter(\n    # retain all rows where target variable is not na\n    # retain all rows where we have population age group information\n    if_all(\n      all_of(\n        c(target_variable, \"Proportion of population in age band (80-89)\")), ~ !is.na(.))\n  ) |&gt; \n  arrange(\n    year, org\n  )"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html#splitting-data",
    "href": "outputs/Modelling/linear_regression.html#splitting-data",
    "title": "Linear regression",
    "section": "Splitting data",
    "text": "Splitting data\n\nset.seed(321)\n\nproportions &lt;- train_validation_proportions(dc_data)\n\n# split dataset into train, validation and test\nsplits &lt;- rsample::initial_validation_time_split(\n  data = dc_data,\n  prop = proportions\n)\n\ndata_train &lt;- rsample::training(splits)\ndata_validation &lt;- rsample::validation(splits)\ndata_test &lt;- rsample::testing(splits)\n\n# check when train, validation and test data start and finish\nlapply(\n  list(data_train, data_validation, data_test),\n  function(x) range(x$year)\n)\n\n[[1]]\n[1] 2013 2018\n\n[[2]]\n[1] 2019 2019\n\n[[3]]\n[1] 2020 2020\n\n# create train and validation set for tuning hyperparameters\ndata_validation_set &lt;- validation_set(splits)"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html#create-workflow",
    "href": "outputs/Modelling/linear_regression.html#create-workflow",
    "title": "Linear regression",
    "section": "Create workflow",
    "text": "Create workflow\n\n# set model ---------------------------------------------------------------\nlinear_model &lt;- parsnip::linear_reg(\n  mode = \"regression\",\n  engine = \"lm\"\n)\n\n\n# set recipe --------------------------------------------------------------\nmissing_data &lt;- names(dc_data)[colSums(is.na(dc_data)) &gt; 0]\n\nlinear_recipe &lt;- recipe(data_train) |&gt; \n  update_role(\n    all_of(target_variable),\n    new_role = \"outcome\"\n  ) |&gt; \n  update_role(\n    org, year,\n    new_role = \"id variable\"\n  ) |&gt; \n  update_role(\n    matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\"),\n    new_role = \"predictor\"\n  ) |&gt; \n  step_center(all_predictors()) |&gt; \n  step_scale(all_predictors()) |&gt; \n  step_impute_knn(all_of(missing_data)) |&gt; \n  step_corr(all_predictors(),\n            threshold = 0.9) |&gt; \n  # estimate the means and standard deviations\n  prep(training = data_train, retain = TRUE)\n\n\n# create workflow ---------------------------------------------------------\n\nlinear_workflow &lt;- workflow() |&gt; \n  add_model(linear_model) |&gt; \n  add_recipe(linear_recipe)\n\n\n# fit model ---------------------------------------------------------------\n\nlinear_fit &lt;- linear_workflow |&gt; \n  fit(data = data_train)"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html#model-checks",
    "href": "outputs/Modelling/linear_regression.html#model-checks",
    "title": "Linear regression",
    "section": "Model checks",
    "text": "Model checks\n\n# check linear assumptions ------------------------------------------------\n\nlinear_fit$fit$fit |&gt; \n  performance::check_model()\n\nModel matrix is rank deficient. VIFs may not be sensible.\n\n\n\n\n\n\n# plot predictions vs observed --------------------------------------------\nlist(\n  train = data_train,\n  validation = data_validation\n) |&gt; \n  bind_rows(\n    .id = \"data_type\"\n  ) |&gt; \n  add_prediction_to_data(\n    linear_fit\n  ) |&gt; \n  ggplot(\n    aes(x = .data[[target_variable]], \n        y = .pred)) + \n  # Create a diagonal line:\n  geom_abline(lty = 2) + \n  geom_point(\n    alpha = 0.5,\n    aes(\n      colour = data_type\n      )\n    ) + \n  labs(\n    y = stringr::str_wrap(\n      paste(\"Predicted\", tolower(target_variable)),\n      60),\n    x = stringr::str_wrap(target_variable, 60)\n  ) +\n  # Scale and size the x- and y-axis uniformly:\n  coord_obs_pred() +\n  theme_minimal()\n\nWarning in predict.lm(object = object$fit, newdata = new_data, type =\n\"response\", : prediction from rank-deficient fit; consider predict(.,\nrankdeficient=\"NA\")"
  },
  {
    "objectID": "outputs/Modelling/linear_regression.html#variable-importance",
    "href": "outputs/Modelling/linear_regression.html#variable-importance",
    "title": "Linear regression",
    "section": "Variable importance",
    "text": "Variable importance\n\nlinear_fit|&gt; \n  extract_fit_parsnip() |&gt; \n  vip::vip(num_features = 10)"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html",
    "href": "outputs/Modelling/modelling_preparation.html",
    "title": "Data preparation for modelling",
    "section": "",
    "text": "The project aims to allow us to predict the value of a performance metric in future years (1, 2, 5 years, say) for each of the ICSs. Performance metrics could be impacted by demand and capacity metrics for the same years, or potentially years building up to that year.\nTo enable testing different models, the data structure should consider the following for each ICS and each year:\n\na value for each target variable (performance metrics) - required\na value for each predictor variable (demand and capacity metrics) - optional\na lagged value (1 to x years lag) for target and predictor variable - optional\ninclusion of ICB code and year in for prediction variables?"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#data-structure",
    "href": "outputs/Modelling/modelling_preparation.html#data-structure",
    "title": "Data preparation for modelling",
    "section": "",
    "text": "The project aims to allow us to predict the value of a performance metric in future years (1, 2, 5 years, say) for each of the ICSs. Performance metrics could be impacted by demand and capacity metrics for the same years, or potentially years building up to that year.\nTo enable testing different models, the data structure should consider the following for each ICS and each year:\n\na value for each target variable (performance metrics) - required\na value for each predictor variable (demand and capacity metrics) - optional\na lagged value (1 to x years lag) for target and predictor variable - optional\ninclusion of ICB code and year in for prediction variables?"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#missing-data",
    "href": "outputs/Modelling/modelling_preparation.html#missing-data",
    "title": "Data preparation for modelling",
    "section": "Missing data",
    "text": "Missing data\n\nHow to accommodate independent providers in the metrics\nThe input data has missing values. The data needs more investigation as to why it is missing (it could be really missing, eg, data not submitted, or it could be a zero, eg, a zero numerator for that metric).\n\nSome timeseries data for Trusts (eg beds available) stop being reported and it is difficult to understand why (eg RT5 stops being reported in Q1 2015 even though the trust still exists)\nSome “Independent Sector Healthcare providers” stop reporting Sickness data mid-timeseries"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#splitting-dataset",
    "href": "outputs/Modelling/modelling_preparation.html#splitting-dataset",
    "title": "Data preparation for modelling",
    "section": "Splitting dataset",
    "text": "Splitting dataset\nData need to be split before training model. Some considerations are:\n\nShould the data be ordered prior to splitting (eg, should models be trained on earlier years, and tested on later years) - on occasion there won’t be very long time series\nTrain, validation and test set? Is there enough data to do this?"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#other-questions",
    "href": "outputs/Modelling/modelling_preparation.html#other-questions",
    "title": "Data preparation for modelling",
    "section": "Other questions",
    "text": "Other questions\n\nWhat to do with IMD? It is published by LSOA for a single year. Should the information for each ICS be applied for each year? How else to integrate deprivation into the analysis?"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#next-steps",
    "href": "outputs/Modelling/modelling_preparation.html#next-steps",
    "title": "Data preparation for modelling",
    "section": "Next steps",
    "text": "Next steps\n\ncheck whether missing data are missing or zero (values could be zero but come through as missing because the numerator is zero)"
  },
  {
    "objectID": "outputs/Modelling/modelling_preparation.html#results",
    "href": "outputs/Modelling/modelling_preparation.html#results",
    "title": "Data preparation for modelling",
    "section": "Results",
    "text": "Results\nThis section documents the results of modelling steps for reference and the project progresses\n\nLinear model\n\nNo lagged data\nselection pattern: matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\ndata are ordered by time before splitting into train (2013-2018), val (2019) and test (2020)\ncorrelation threshold: 0.9\nimpute missing with knn for all predictors\n\n\n# A tibble: 3 × 4\n#   .metric .estimator  train validation\n#   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;\n# 1 rmse    standard   0.0317     0.0432\n# 2 rsq     standard   0.830      0.283 \n# 3 mae     standard   0.0257     0.0353\n\n\n\nLinear model current and lag\n\nCurrent year and lagged data (including lagged target variable)\nselection pattern: matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\ndata are ordered by time before splitting into train (2013-2018), val (2019) and test (2020)\ncorrelation threshold: 0.9\nimpute missing with knn for all predictors\n\n\n# A tibble: 3 × 4\n#   .metric .estimator  train validation\n#   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;\n# 1 rmse    standard   0.0263     0.0363\n# 2 rsq     standard   0.883      0.452 \n# 3 mae     standard   0.0215     0.0281\n\n\n\nLinear model using only lagged data\n\nOnly lagged data (including lagged target variable)\nselection pattern: matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\ndata are ordered by time before splitting into train (2014-2018), val (2019) and test (2020)\ncorrelation threshold: 0.9\nimpute missing with knn for all predictors\n\n\n# A tibble: 3 × 4\n#   .metric .estimator  train validation\n#   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;\n# 1 rmse    standard   0.0238     0.0368\n# 2 rsq     standard   0.883      0.498 \n# 3 mae     standard   0.0191     0.0254\n\n\n\nLinear model using only lagged data (without lagged target variable)\n\nOnly lagged data (not including lagged target variable)\nselection pattern: matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\ndata are ordered by time before splitting into train (2014-2018), val (2019) and test (2020)\ncorrelation threshold: 0.9\nimpute missing with knn for all predictors\n\n\n# A tibble: 3 × 4\n#   .metric .estimator  train validation\n#   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;\n# 1 rmse    standard   0.0322     0.0449\n# 2 rsq     standard   0.787      0.236 \n# 3 mae     standard   0.0258     0.0368\n\n\n\nRandom forest current and lag\n\nCurrent year and lagged data (including lagged target variable)\nselection pattern: matches(\"^ESR|^Workforce|^Bed|age band|Year 6|GPPS\")\ndata are ordered by time before splitting into train (2013-2018), val (2019) and test (2020)\nimpute missing with knn for all predictors\n\n\n# A tibble: 3 × 5\n#   .metric .estimator  train validation   test\n#   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;\n# 1 rmse    standard   0.0166     0.0574 0.132 \n# 2 rsq     standard   0.976      0.258  0.0839\n# 3 mae     standard   0.0134     0.0493 0.125"
  }
]